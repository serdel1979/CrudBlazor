@page "/detail"
@page "/detail/{Id:int}"

@using Blazor.Model
@using Interfaces
@inject IFilmService FilmService

<h3>Detalle del film</h3>

<EditForm Model="film" OnValidSubmit="save" FormName="FilmDates">

    <table class="table">
        <tr>
            <td>Titulo</td>
            <td><InputText id="titulo" @bind-Value="film.titulo" class="form-control"></InputText></td>
        </tr>
        <tr>
            <td>Director</td>
            <td><InputText id="director" @bind-Value="film.director" class="form-control"></InputText></td>
        </tr>
        <tr>
            <td>Release</td>
            <td><InputDate id="release" @bind-Value="film.release" class="form-control"></InputDate></td>
        </tr>
        <tr>
            <td colspan="2" style="text-align:center">
                <button type="submit" class="btn btn-primary">Save</button>
                <button type="button" class="btn btn-secondary" @onclick="cancel">Cancel</button>
            </td>
        </tr>
    </table>
</EditForm>

@code {
    [Parameter]
    public int Id { get; set; } = 0;

    Film film = new Film();

    protected override async Task OnInitializedAsync()
    {
        if (Id != 0)
        {
            film = await FilmService.GetFilm(Id);
        }
    }


    protected async Task save()
    {
        await FilmService.Save(film);
    }

    protected void cancel()
    {
    }
}